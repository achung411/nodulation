<!DOCTYPE html>
<html lang="en" ng-app="portal">
<head>
	<meta charset="UTF-8">
	<title><%= title %></title>
	<meta name="description" content="A social media portal in MEAN">
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular-route.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Average+Sans">
	<link rel="stylesheet" href="/stylesheets/main.css" />


	<script>
	var portal = angular.module('portal', ['ngRoute']);
	var ioo = io;

	// io = io.connect();
 //    io.emit('order_ice_cream', {data: 'welcome!'});
    // io.on('user_authenticated', function(data) {
    // 	console.log('received confirmation that our user is authorized:', data);
    // 	window.location.href = "/index";
    // })

	// portal.config(function ($routeProvider) {
	// 	$routeProvider
	// 		.when('/welcome',
	// 		{
	// 			templateUrl: '/partials/welcome.html'
	// 		})
	// 		.when('/register',
	// 		{
	// 			templateUrl: '/partials/register.html'
	// 		})
	// 		.otherwise({
	// 			redirectTo: '/welcome'
	// 		});
	// });

	// portal.factory('socket', function ($rootScope) {
	//   var socket = ioo.connect();
	//   return {
	//     on: function (eventName, callback) {
	//       socket.on(eventName, function () {  
	//         var args = arguments;
	//         $rootScope.$apply(function () {
	//           callback.apply(socket, args);
	//         });
	//       });
	//     },
	//     emit: function (eventName, data, callback) {
	//       socket.emit(eventName, data, function () {
	//         var args = arguments;
	//         $rootScope.$apply(function () {
	//           if (callback) {
	//             callback.apply(socket, args);
	//           }
	//         });
	//       })
	//     }
	//   };
	// });

	// portal.factory('UserFactory', function(socket) {
	// 	var current_user = {};
	// 	var factory = {};

	// 	factory.authenticate = function(info) {
	// 		console.log('emitting from Session.authenticate: ' + info.email + ' ' + info.password);
	// 		socket.emit('authenticate_user', {email: info.email, password: info.password}, function() {
	// 			    io.on('user_authenticated', function(data) {
	//     			console.log('received confirmation that our user is authorized:', data);
	//     			factory.create(data, function() {
	//     			window.location.href = "/index";
	//     		})
	// 		});
	// 	}

	// 	factory.create = function(info) {
	// 		info.last_on = new Date();
	// 		current_user = info;
	// 	};

	// 	factory.getInfo = function() {
	// 		return current_user;
	// 	};


	// 	return factory;
	// });

    portal.controller('portalController', function($scope, socket){
		// $scope.login = function() {
			// UserFactory.authenticate($scope.user);
			// Session.create($scope.user);
		// };

	    // io.on('user_authenticated', function(data) {
	    // 	console.log('received confirmation that our user is authorized:', data);
	    // 	factory.create(data, function() {
	    // 		window.location.href = "/index";
	    // 	})
	    // });





    	// $scope.current_user = Session.getInfo();
		// $scope.hello = "hi everyone.  how's it going?";
		// console.log('emitting order_ice_cream', {quantity: 5});
		// socket.emit('order_ice_cream', {quantity: 5});
		$scope.tempo = [{first_name: "Kitty", last_name: "Pryde", email: "shadowcat@xcalibur.com"},
						{first_name: "Kurt", last_name: "Wagner", email: "nightcrawler@xcalibur.com"}];
	});
	</script>
</head>
<body>
	<header>
		<div class="logo col-sm-2">
			<a href=""><img src="images/logo.png">odular</a>
		</div>
		<div class="col-sm-4">
			<input type="text" placeholder="Search for people" ng-model="searchlight">
		</div>
		<div class="col-sm-3">
			<div class="col-sm-9">
				<a href="#/profile"><%= me.first_name + " " + me.last_name %></a>
			</div>
			<div class="col-sm-3">
				<a href="#/main">Home</a>
			</div>
		</div>
		<div class="col-sm-2">
			<a href=""><i class="fa fa-users"></i></a>
			<a href=""><i class="fa fa-comments-o"></i></a>					
			<a href=""><i class="fa fa-bell-o"></i></a>
			<a href="#/settings"><i class="fa fa-cogs"></i></a>
		</div>
		<div class="col-sm-1">
			<a href="/signout">Sign out</a>
		</div>
	</header>
	<div class="col-sm-12">
		

	<div class="main_content col-sm-9" ng-view></div>

	<div class="right_sidebar col-sm-3">
		<div class="notifications">
			<p><a href=""><span class="user_name">Sherlock Holmes</span></a> commented on Jim Moriarty's post.</p>
			<p><a href=""><span class="user_name">Mrs. Hudson</span></a> posted on Yorkshire Cricket's site.</p>
			<p><a href=""><span class="user_name">Irene Adler</span></a> posted a message on Jim Moriarty's wall.</p>
			<p><a href=""><span class="user_name">Greg Lestrade</span></a> is now friends with Molly Hooper.</p>
			<p><a href=""><span class="user_name">John Watson</span></a> likes Sherlock Holmes' post.</p>
			<p><a href=""><span class="user_name">Sherlock Holmes</span></a> commented on Jim Moriarty's post.</p>
			<p><a href=""><span class="user_name">Mrs. Hudson</span></a> posted on Yorkshire Cricket's site.</p>
			<p><a href=""><span class="user_name">Irene Adler</span></a> posted a message on Jim Moriarty's wall.</p>
			<p><a href=""><span class="user_name">Greg Lestrade</span></a> is now friends with Molly Hooper.</p>
			<p><a href=""><span class="user_name">John Watson</span></a> likes Sherlock Holmes' post.</p>
		</div>
		<div class="contact_list">
			<p>Sherlock Holmes</p>
			<p>Mrs. Hudson</p>
			<p>Greg Lestrade</p>
			<p>John Watson</p>
			<p>Jim Moriarty</p>
		</div>
	</div>
	</div>
</body>
</html>